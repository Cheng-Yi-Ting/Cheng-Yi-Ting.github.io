<!DOCTYPE html>
<html>

<head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-151412407-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }
        gtag('js', new Date());

        gtag('config', 'UA-151412407-1');
    </script>

    <meta charset="utf-8">
    
        <title>
            
                第 1 頁 |
                    
                        Cyting 部落格
        </title>
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
        
                        
                                
                                        
                                                <meta name="description" content="部落格主要記載程式技術、科技或生活類型文章">
<meta property="og:type" content="website">
<meta property="og:title" content="Cyting 部落格">
<meta property="og:url" content="https://cheng-yi-ting.github.io/index.html">
<meta property="og:site_name" content="Cyting 部落格">
<meta property="og:description" content="部落格主要記載程式技術、科技或生活類型文章">
<meta property="og:locale" content="zh_TW">
<meta property="article:author" content="Cheng-Yi-Ting">
<meta property="article:tag" content="Coding ">
<meta property="article:tag" content="程式">
<meta property="article:tag" content="前端">
<meta name="twitter:card" content="summary">
                                                    
                                                        <link rel="alternate" href="/atom.xml" title="Cyting 部落格" type="application/atom+xml">
                                                        
                                                            <link rel="icon" href="/css/images/favicon.ico">
                                                            
                                                                <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
                                                                
                                                                    <link href="https://fonts.googleapis.com/css?family=Open+Sans|Montserrat:700" rel="stylesheet" type="text/css">
                                                                    <link href="https://fonts.googleapis.com/css?family=Roboto:400,300,300italic,400italic" rel="stylesheet" type="text/css">
                                                                    <link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
                                                                    <style type="text/css">
                                                                        @font-face {
                                                                            font-family: futura-pt;
                                                                            src: url(https://use.typekit.net/af/9749f0/00000000000000000001008f/27/l?subset_id=2&fvd=n5) format("woff2");
                                                                            font-weight: 500;
                                                                            font-style: normal;
                                                                        }
                                                                        
                                                                        @font-face {
                                                                            font-family: futura-pt;
                                                                            src: url(https://use.typekit.net/af/90cf9f/000000000000000000010091/27/l?subset_id=2&fvd=n7) format("woff2");
                                                                            font-weight: 500;
                                                                            font-style: normal;
                                                                        }
                                                                        
                                                                        @font-face {
                                                                            font-family: futura-pt;
                                                                            src: url(https://use.typekit.net/af/8a5494/000000000000000000013365/27/l?subset_id=2&fvd=n4) format("woff2");
                                                                            font-weight: lighter;
                                                                            font-style: normal;
                                                                        }
                                                                        
                                                                        @font-face {
                                                                            font-family: futura-pt;
                                                                            src: url(https://use.typekit.net/af/d337d8/000000000000000000010095/27/l?subset_id=2&fvd=i4) format("woff2");
                                                                            font-weight: 400;
                                                                            font-style: italic;
                                                                        }
                                                                    </style>

                                                                    <link rel="stylesheet" id="athemes-headings-fonts-css" href="//fonts.googleapis.com/css?family=Yanone+Kaffeesatz%3A200%2C300%2C400%2C700&amp;ver=4.6.1" type="text/css" media="all">

                                                                    <link rel="stylesheet" id="athemes-headings-fonts-css" href="//fonts.googleapis.com/css?family=Oswald%3A300%2C400%2C700&amp;ver=4.6.1" type="text/css" media="all">
                                                                    
<link rel="stylesheet" href="css/style.css">


                                                                        
<script src="js/jquery-3.1.1.min.js"></script>


                                                                            <!-- Bootstrap core CSS -->
                                                                            <link rel="stylesheet" href="/css/bootstrap.css">
                                                                            <link rel="stylesheet" href="/css/fashion.css">
                                                                            <link rel="stylesheet" href="/css/glyphs.css">

<meta name="generator" content="Hexo 4.2.0"></head>


  <body>


  


<header id="allheader" class="site-header" role="banner" 
   >
  <div class="clearfix container">
      <div class="site-branding">

          <h1 class="site-title">
            
              <a href="/" title="Cyting 部落格" rel="home"> Cyting 部落格 </a>
            
          </h1>
          
          
            <div class="site-description">部落格主要記載程式技術、科技或生活類型文章</div>
          
            
          <nav id="main-navigation" class="main-navigation" role="navigation">
            <a class="nav-open">Menu</a>
            <a class="nav-close">Close</a>

            <div class="clearfix sf-menu">
              <ul id="main-nav" class="menu sf-js-enabled sf-arrows"  style="touch-action: pan-y;">
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="index.html">首頁</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="archives">歸檔</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="categories">分類</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="tags">標籤</a> </li>
                    
              </ul>
            </div>
          </nav>

      </div>
  </div>
</header>


  <div id="container">
    <div id="wrap">
            
      <div id="content" class="outer">
        
          <section id="main">
  
    <article id="post-2020-02-23-哈佛的5堂大腦行為學思考的藝術"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="2020/02/23/2020-02-23-%E5%93%88%E4%BD%9B%E7%9A%845%E5%A0%82%E5%A4%A7%E8%85%A6%E8%A1%8C%E7%82%BA%E5%AD%B8%E6%80%9D%E8%80%83%E7%9A%84%E8%97%9D%E8%A1%93/">哈佛的5堂大腦行為學思考的藝術</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="2020/02/23/2020-02-23-%E5%93%88%E4%BD%9B%E7%9A%845%E5%A0%82%E5%A4%A7%E8%85%A6%E8%A1%8C%E7%82%BA%E5%AD%B8%E6%80%9D%E8%80%83%E7%9A%84%E8%97%9D%E8%A1%93/" class="article-date">
	  <time datetime="2020-02-22T16:00:00.000Z" itemprop="datePublished">二月 23, 2020</time>
	</a>

      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="categories/%E8%AE%80%E6%9B%B8%E5%BF%83%E5%BE%97/">讀書心得</a>
 
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>本書提及「哈佛大學十分注重培養學生的思維能力」，點破我們長年的思維錯誤以及癥結點。在這個資訊爆炸的時代，如何有效地獲取知識並做出正確決策，達到全面性的思考。</p>
<img src="2020-02-23-哈佛的5堂大腦行為學思考的藝術-1.jpg" style="width:1200;height:628">

<br/>

<p>美國心理學家斯賓塞‧約翰曾說<strong>：「要做出一個更好的決策，首先要停止執行一個錯誤的決策。」</strong></p>
<p>雖然我們都無法在每次的決策中，讓事情往更好的方向發展，但要盡量降低錯誤決策發生的機率。</p>
<p>希拉蕊曾說<strong>：「人生就是不斷的在做抉擇，而我們的選擇，以及怎樣處理自己的選擇，將決定我們成為什麼樣的人。」</strong></p>
<img src="2020-02-23-哈佛的5堂大腦行為學思考的藝術-2.jpeg" style="width:1200;height:628">

<br/>

<h1 id="提問的能力"><a href="#提問的能力" class="headerlink" title="提問的能力"></a>提問的能力</h1><p>愛因斯坦曾說<strong>：「解決問題可能只是技巧，而提出新的問題卻需要創造性的想像力，提出問題比解決問題更為重要。」</strong></p>
<p>如果想要解決問題，那你一定要學會如何問問題。提問可以讓人思緒清楚、激發創意，並找出做事的新方向。</p>
<p>彼得杜拉克說<strong>：「過去的領導者可能是一個知道如何解答問題的人，但未來的領導者必將是一個知道如何提問的人。」</strong></p>
<img src="2020-02-23-哈佛的5堂大腦行為學思考的藝術-4.jpeg" style="width:1200;height:628">

<br/>

<h2 id="試著接受「不只一個答案」的解答"><a href="#試著接受「不只一個答案」的解答" class="headerlink" title="試著接受「不只一個答案」的解答"></a>試著接受「不只一個答案」的解答</h2><p>哈佛大學第24任校長內森‧馬什‧普西說<strong>：「一個人是否具有創造力，是一流人才和三流人才的分水嶺。」</strong></p>
<p>對於生活中的許多事物，解決問題的方法或答案常常不只一種。若決策者認為問題只有一個解決方案，那麼在找到某個答案之後就會停滯不前，放棄繼續探索事物的動力，而擁有創造性思維的人總是努力吸取各種新知識，靈活運用思維將是邁向成功的第一步。</p>
<img src="2020-02-23-哈佛的5堂大腦行為學思考的藝術-3.jpeg" style="width:1200;height:628">

<br/>

<p>以下分享書中決策者必須培養的想像力與思考力，運用以下4個技巧找出嶄新方法：<br>1、擁有懷疑一切的精神<br>2、努力探索一切的不可能<br>3、盡量運用發散思維，設想眾多可能性<br>4、不斷重新評估</p>
<p>決策者在面對很多問題時，容易受到自己思維的限制，因此要保持良好的創新能力，當發現問題時，就能找到與眾不同的解決方式。</p>
<h1 id="換位思考"><a href="#換位思考" class="headerlink" title="換位思考"></a>換位思考</h1><p>哈佛教授經常引用這句話來教育學生<strong>：「無論面對怎樣的災禍與不幸，都要學會樂觀地面對，只要能夠換一種心態，換一個角度看問題，生活便能充滿陽光和歡樂。」</strong></p>
<p>很多看似無法解決的問題，換一個思考方式，最後的結果可能完全不同。</p>
<p>有一句英國諺語說<strong>：「想知道別人的鞋子是否合腳，只要穿上別人的鞋子走一英里就行了。」</strong></p>
<p>它的基本意思是說，你要想真正瞭解別人，就要學會站在別人的角度來看問題。如果決策者懂得換一個心態來看待問題，對解決問題來說有利無害。</p>
<img src="2020-02-23-哈佛的5堂大腦行為學思考的藝術-5.jpg" style="width:1200;height:628">

<br/>

<h1 id="心向作用"><a href="#心向作用" class="headerlink" title="心向作用"></a>心向作用</h1><p>在瞭解他人或事情的真相時，我們很容易被「第一印象」影響，陷入了表面的認識，甚至被偽裝的假象迷惑。由於先入為主的思想，以及資訊量不足的情況下，會對事情產生偏見而影響決策，這種固有的心理狀態、習慣或態度，又稱為「心向作用。」</p>
<p>例如看到員工上班時無精打采、表現失常，主管可能就會對該名員工印象不好，甚至會有「懶惰不負責任」的評價，但事實是家人生病，造成員工精神焦慮，而得不到充足的睡眠時間，所以工作上就無法專心。如果主管因為員工的表現而進行懲處，也不去瞭解背後的原因，就有可能會失去一位優秀的員工或造成更大的反彈。</p>
<img src="2020-02-23-哈佛的5堂大腦行為學思考的藝術-6.jpeg" style="width:1200;height:328">

<br/>

<h1 id="內群體偏好"><a href="#內群體偏好" class="headerlink" title="內群體偏好"></a>內群體偏好</h1><p>心理學研究發現，心懷偏見的人或多或少都出現過歧視行為，這是一種內在本能。以貌取人、種族歧視、歧視身心障礙人士等行為是怎麼形成的？</p>
<p>現代心理學研究證明，歧視是人們內心的一種保護性偏見，可以幫助人類檢測和預防疾病。由於肉眼無法看見病菌，只能透過心理機制避免潛在的感染。哥倫比亞大學心理學教授馬克‧沙勒指出，<strong>歧視行為是大腦的預防醫學，幫助人類對於周圍異常事物提高警覺。</strong>比方說，看到有人流鼻涕、或是臉上有大片色斑等不正常的情況，人們會懷疑是某些疾病的特徵，並保持安全距離，以免受到病菌威脅。</p>
<img src="2020-02-23-哈佛的5堂大腦行為學思考的藝術-7.jpg" style="width:1200;height:628">

<br/>

      
    </div>
    <footer class="entry-meta entry-footer">
      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="categories/%E8%AE%80%E6%9B%B8%E5%BF%83%E5%BE%97/">讀書心得</a>

      
  <span class="ico-tags"></span>
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="tags/%E6%80%9D%E8%80%83%E9%82%8F%E8%BC%AF/" rel="tag">思考邏輯</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="tags/%E7%94%9F%E6%B6%AF%E8%A6%8F%E5%8A%83/" rel="tag">生涯規劃</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="tags/%E8%81%B7%E5%A0%B4%E5%B7%A5%E4%BD%9C/" rel="tag">職場工作</a></li></ul>

      
    </footer>
    <hr class="entry-footer-hr">
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-2020-02-22-斜槓青年"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="2020/02/22/2020-02-22-%E6%96%9C%E6%A7%93%E9%9D%92%E5%B9%B4/">斜槓青年</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="2020/02/22/2020-02-22-%E6%96%9C%E6%A7%93%E9%9D%92%E5%B9%B4/" class="article-date">
	  <time datetime="2020-02-21T16:00:00.000Z" itemprop="datePublished">二月 22, 2020</time>
	</a>

      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="categories/%E8%AE%80%E6%9B%B8%E5%BF%83%E5%BE%97/">讀書心得</a>
 
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>由於目前在服兵役，有一些空閒時間，那不如就趁現在多看點書，累積點知識及智慧。我認為看書的好處很多，例如透過閱讀來獲得書本裡的經驗，思考別人所經歷過的事情，以及對事情的看法來培養自我的理解能力與人生觀，對於之後我撰寫文章也會有所幫助。看書不僅可以讓我保持心情愉悅，也能適時地清理雜亂的思緒和煩躁感，當生活上遇到不如意的事，拾起書本，看著許多激勵人心的故事，讓所有負面情緒都煙消雲散。</p>
<img src="logo.jpg" style="width:3000 height:2000">

<p>斜槓青年一直是近年的熱門的話題，讓我們透過此書來瞭解它的運作概念，以及如何晉身為斜槓青年的一份子吧！</p>
<br/>

<img src="2020-02-22-斜槓青年-1.jfif" style="width:3000 height:2000">

<br/>

<h1 id="斜槓人生"><a href="#斜槓人生" class="headerlink" title="斜槓人生"></a>斜槓人生</h1><p>有人認為斜槓青年就是擁有幾份兼差；或是把它象徵成沒有穩定收入的自由職業，然而成為斜槓青年的目的並非是想要額外的收入，而是為了追求更豐富的人生。過去我們在考量職涯時，基本只上就只會單一發展，根據自身專長及優勢來選擇工作，再慢慢往上爬。然而斜槓青年帶來一種新的思維，透過橫向發展，結合自身愛好與優勢發展多種領域，並獲得多重收入。</p>
<img src="2020-02-22-斜槓青年-2.jpeg" style="width:3000 height:2000">

<br/>

<p>利用空閒時間培養新的興趣，例如烹飪、健身、繪畫等等……即使這些嗜好還無法成為穩定收入的來源，但可以讓人生更加充實與圓滿。</p>
<h1 id="多元人生"><a href="#多元人生" class="headerlink" title="多元人生"></a>多元人生</h1><p>未來真正優秀的人才，往往是那些有著全面知識結構的專業人才。對於大多數人來說，我們工作上所需要的能力都是一些複雜的綜合能力，例如用戶經營、產品開發等等，它們需要更全面的知識結構與多元技能。不難發現很多年輕人都在利用業餘時間不停地學習，所學的知識不一定與自身的專業領域相關。</p>
<img src="2020-02-22-斜槓青年-3.jpeg" style="width:3000 height:2000">

<br/>

<h1 id="財務自由"><a href="#財務自由" class="headerlink" title="財務自由"></a>財務自由</h1><p>很多有錢人除了消費較無限制之外和一般人可能毫無區別，也會為了追求更多財富犧牲許多寶貴的事物，像是與愛人、家人相處的時間，以及自身的健康及興趣。</p>
<h4 id="那我們要如何獲得財務自由呢？"><a href="#那我們要如何獲得財務自由呢？" class="headerlink" title="那我們要如何獲得財務自由呢？"></a><strong>那我們要如何獲得財務自由呢？</strong></h4><p>財務自由並不表示有足夠的資本，而是取決於被動收入與日常支出的差額。所謂被動收入，就是不需花費太多時間和力氣就能自動獲取，例如銀行存款的利息收入、理財投資等等。而主動收入是必須花費精力才能得到的收入，像是我們平常的工作都是主動收入，這些收入都是用勞力和時間換來的。</p>
<p>如果被動收入穩定且大於日常支出，當我們不用在為錢工作，而是為了自己的興趣工作，就算沒有足夠的財富，也已經實現了財富自由。過自己真正想要的生活，就是財務自由的意義所在。</p>
<img src="2020-02-22-斜槓青年-4.jpg" style="width:3000 height:2000">

<br/>

<h1 id="美好人生"><a href="#美好人生" class="headerlink" title="美好人生"></a>美好人生</h1><p>如今越來越多年輕人不再滿足於「單一職業」的生活方式，而是開始藉由多重職業、多重收入來體驗更豐富的生活。從某種意義上來看，「斜槓青年」所提倡的人生就是一種讓自己生活得更快樂，在保留一份穩定工作的同時，也能去探索不同領域的潛在可能性，並找到人生的熱情與意義。</p>
<img src="2020-02-22-斜槓青年-5.jpeg" style="width:3000 height:2000">

      
    </div>
    <footer class="entry-meta entry-footer">
      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="categories/%E8%AE%80%E6%9B%B8%E5%BF%83%E5%BE%97/">讀書心得</a>

      
  <span class="ico-tags"></span>
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="tags/Slash/" rel="tag">Slash</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="tags/%E6%96%9C%E6%A7%93%E9%9D%92%E5%B9%B4/" rel="tag">斜槓青年</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="tags/%E7%94%9F%E6%B6%AF%E8%A6%8F%E5%8A%83/" rel="tag">生涯規劃</a></li></ul>

      
    </footer>
    <hr class="entry-footer-hr">
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-2020-02-22-斜槓的50道難題"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="2020/02/22/2020-02-22-%E6%96%9C%E6%A7%93%E7%9A%8450%E9%81%93%E9%9B%A3%E9%A1%8C/">斜槓的50道難題</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="2020/02/22/2020-02-22-%E6%96%9C%E6%A7%93%E7%9A%8450%E9%81%93%E9%9B%A3%E9%A1%8C/" class="article-date">
	  <time datetime="2020-02-21T16:00:00.000Z" itemprop="datePublished">二月 22, 2020</time>
	</a>

      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="categories/%E8%AE%80%E6%9B%B8%E5%BF%83%E5%BE%97/">讀書心得</a>
 
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>上一篇分享了「斜槓青年」這一本書，探討斜槓的人生觀以及生活意義。這次想跟大家分享另一本書，「斜槓的五十道難題」，書中請到三位成功的斜槓人士，將自身摸索出的經驗，提供一些指南與建議，幫助我們在追求斜槓人生的道路上更加得心應手。</p>
<img src="2020-02-22-斜槓的50道難題-1.jpg" style="width:400px;height:400px">

<br/>

<h1 id="未來趨勢"><a href="#未來趨勢" class="headerlink" title="未來趨勢"></a>未來趨勢</h1><p>在 AI 人工智慧、5G、 IOT 時代來臨，許多技術的發展都有顯著的突破，其應用也逐漸滲透到各個領域當中。我們不清楚何時會對我們的工作環境帶來影響，因此要盡速培養不會被取代的能力及價值。面對未來科技的進步，使自己具有創新及多元能力，並發展為跨領域人才，這些特質會是斜槓思維的核心部分。</p>
<img src="2020-02-22-斜槓的50道難題-2.png" style="width:100%;height:100%">

<br/>

<h1 id="多重職業、多重收入"><a href="#多重職業、多重收入" class="headerlink" title="多重職業、多重收入"></a>多重職業、多重收入</h1><p>許多人認為「斜槓青年」就是「多職」、「兼職」或是「多重收入」，但作者認為其焦點應放在「多重才能」與「多重價值」上。這些才能通常是你的喜好或興趣，例如你很喜歡彈吉他，你可以教任何人而不一定要收費。因為當你具備這些才能，就能夠創造價值，因為是自己喜歡做的事，所以更有學習熱忱，不只是滿足了生活的樂趣也拓展人生的發展性。</p>
<img src="2020-02-22-斜槓的50道難題-3.jpeg" style="width:100%;height:100%">

<br/>

<h1 id="斜槓發展"><a href="#斜槓發展" class="headerlink" title="斜槓發展"></a>斜槓發展</h1><p>對於想轉換跑道的人，作者建議先穩定原本的工作下在發展斜槓，也就是說，利用多餘的時間去發展第二專長和興趣，讓興趣創造出的價值產生出收入，當收入逐漸達到原本的一半以上時，就可以逐漸轉移重心到後者上，並快速提高後者的收入，當後者收入超越前者時，才考慮是否放棄原本的正職，並投入到新的領域上。</p>
<h4 id="先穩定單槓，再開始斜槓"><a href="#先穩定單槓，再開始斜槓" class="headerlink" title="先穩定單槓，再開始斜槓"></a>先穩定單槓，再開始斜槓</h4><img src="2020-02-22-斜槓的50道難題-4.jpg" style="width:100%;height:100%">

<br/>

<h1 id="斜槓思維"><a href="#斜槓思維" class="headerlink" title="斜槓思維"></a>斜槓思維</h1><p>何謂斜槓思維，這邊區分了幾種類型：</p>
<ol>
<li><strong>多角色扮演</strong></li>
</ol>
<p>小斜槓概念，工作性質為垂直發展，例如：網站程式設計師、資訊安全工程師、演算法開發工程師。</p>
<ol start="2">
<li><strong>跨組織整合</strong></li>
</ol>
<p>中斜槓概念，工作性質為橫向發展，例如：產品規劃／客戶管理 ／生產管理。</p>
<ol start="3">
<li><strong>多方位發展</strong></li>
</ol>
<p>大斜槓概念，工作性質為跨不同領域，成為真正的斜槓工作者，例如：程式設計師、廚師、健身教練、社群編輯。</p>
<img src="2020-02-22-斜槓的50道難題-5.jpeg" style="width:100%;height:100%">

<br/>

<p>如果還無法具有多方位發展的能力，建議可以先從多角色扮演的小斜槓，以及跨組織整合的中斜槓來提升自我的競爭力。</p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="categories/%E8%AE%80%E6%9B%B8%E5%BF%83%E5%BE%97/">讀書心得</a>

      
  <span class="ico-tags"></span>
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="tags/Slash/" rel="tag">Slash</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="tags/%E6%96%9C%E6%A7%93%E9%9D%92%E5%B9%B4/" rel="tag">斜槓青年</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="tags/%E7%94%9F%E6%B6%AF%E8%A6%8F%E5%8A%83/" rel="tag">生涯規劃</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="tags/%E8%81%B7%E5%A0%B4%E5%B7%A5%E4%BD%9C/" rel="tag">職場工作</a></li></ul>

      
    </footer>
    <hr class="entry-footer-hr">
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-2020-02-08-HexoBackup"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="2020/02/08/2020-02-08-HexoBackup/">Hexo 備份</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="2020/02/08/2020-02-08-HexoBackup/" class="article-date">
	  <time datetime="2020-02-07T16:00:00.000Z" itemprop="datePublished">二月 8, 2020</time>
	</a>

       
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>我們在使用 Hexo 網誌框架時，會事先在 GitHub 上新增 GitHub Pages 來完成 Blog 搭建，透過輸入  <code>hexo g -d</code>  進行部署，所產生的是靜態網頁並發布在網站上，不過卻沒有備份到 .md 檔案，這樣我們辛辛苦苦寫的文章卻沒有備份到。所以本篇將會說明如何將我們所撰寫的文章，及相關的配置設定一同備份至 GitHub ，這樣當原始檔案遺失時才有機會進行還原，而不是只有 Hexo 所產生出的靜態檔案。</p>
<img src="2020-02-08-HexoBackup-1.PNG" style="width:100%;">

<p>每次透過  <code>hexo g -d</code>  後  <code>master</code>  會儲存 Blog 的靜態檔案。</p>
<h1 id="分支建立"><a href="#分支建立" class="headerlink" title="分支建立"></a>分支建立</h1><p>因為需要要儲存其它的檔案，所以要先在自己的 GitHub Pages 的 Repository 上建立一個新的分支， Repository 名稱為 <code>username.github.io</code> ，當然你也可以存在別的 Repository  。一開始只會有  <code>master</code>  分支，而這邊示範為在原本的 Repository 上新增 <code>backup</code> 分支。</p>
<h1 id="步驟"><a href="#步驟" class="headerlink" title="步驟"></a>步驟</h1><p>初始化這個目錄，進行版本控制。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git init</span><br></pre></td></tr></table></figure>

<p>建立新分支  <code>backup</code>  ：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout -b backup</span><br></pre></td></tr></table></figure>

<p>Hexo 本身在   <code>.gitignore</code>  中排除了不需要上傳的檔案，所以直接  <code>git add.</code>  即可：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">.DS_Store</span><br><span class="line">Thumbs.db</span><br><span class="line">db.json</span><br><span class="line">*.log</span><br><span class="line">node_modules&#x2F;</span><br><span class="line">public&#x2F;</span><br><span class="line">.deploy*&#x2F;</span><br></pre></td></tr></table></figure>

<p>將檔案加至暫存區及儲存庫：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git add .</span><br><span class="line">git commit -m &quot;Commit update&quot;</span><br></pre></td></tr></table></figure>

<p>設定要推上遠端 GitHub Server 的節點：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote add origin git@github.com:username&#x2F;username.io.git</span><br></pre></td></tr></table></figure>

<p>可以使用  <code>npm scripts</code>  來執行上面重複的命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;    </span><br><span class="line">    &quot;scripts&quot;: &#123;</span><br><span class="line">        &quot;b&quot;: &quot;git add . &amp;&amp; git commit -m \&quot;Commit update\&quot; &amp;&amp; git push origin master:backup&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>每行命令用  <code>&amp;&amp;</code>  符號來分開執行。</p>
<p>之後就可以透過輸入  <code>npm run b</code>  來佈署  <code>.md</code>  檔、主題及相關配置：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run b</span><br></pre></td></tr></table></figure>

<img src="2020-02-08-HexoBackup-2.PNG" style="width:100%;">

<p>當切換至分支  <code>backup</code>  後就會看到原本在本地的檔案。</p>
<h1 id="git-backup"><a href="#git-backup" class="headerlink" title="git-backup"></a>git-backup</h1><p>除了上述方法以外，也可以使用  <a href="https://github.com/coneycode/hexo-git-backup" target="_blank" rel="noopener">hexo-git-backup</a>  套件來備份檔案：</p>
<p>安裝套件：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-git-backup --save</span><br></pre></td></tr></table></figure>

<p><code>_config.yml</code>  檔案設定：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">backup:</span><br><span class="line">    type: git</span><br><span class="line">    repository:</span><br><span class="line">       github: git@github.com:username&#x2F;username.git,branchName</span><br><span class="line">       gitcafe: git@github.com:username&#x2F;username.git,branchName</span><br></pre></td></tr></table></figure>

<p>執行備份：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo backup</span><br></pre></td></tr></table></figure>

<p>或</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo b</span><br></pre></td></tr></table></figure>

<p>如果想連主題一起備份的話，可新增  <code>theme</code>  欄位：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">backup:</span><br><span class="line">    type: git</span><br><span class="line">    theme: coney,landscape,xxx</span><br><span class="line">    repository:</span><br><span class="line">       github: git@github.com:username&#x2F;username.git,branchName</span><br><span class="line">       gitcafe: git@github.com:username&#x2F;username.git,branchName</span><br></pre></td></tr></table></figure>

<p>如果想要更改  <code>commit</code>  訊息的話，可新增  <code>message</code>  欄位：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">backup:</span><br><span class="line">    type: git</span><br><span class="line">    message: Commit update</span><br><span class="line">    repository:</span><br><span class="line">       github: git@github.com:username&#x2F;username.git,branchName</span><br><span class="line">       gitcafe: git@github.com:username&#x2F;username.git,branchName</span><br></pre></td></tr></table></figure>

<h1 id="參考文獻"><a href="#參考文獻" class="headerlink" title="參考文獻"></a>參考文獻</h1><ol>
<li><a href="https://dwatow.github.io/2019/01-03-hexo/hexo-backup-to-branch/" target="_blank" rel="noopener">Hexo 備份 md 檔 - 《Chris 技術筆記》</a></li>
<li><a href="https://www.dazhuanlan.com/2019/09/24/5d89fc809d6bf/" target="_blank" rel="noopener">Hexo備份至GitHub | 大专栏</a></li>
</ol>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="tags/Git/" rel="tag">Git</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="tags/GitHub/" rel="tag">GitHub</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="tags/Hexo/" rel="tag">Hexo</a></li></ul>

      
    </footer>
    <hr class="entry-footer-hr">
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-2020-02-08-MarkText"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="2020/02/08/2020-02-08-MarkText/">Markdown editor - MarkText</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="2020/02/08/2020-02-08-MarkText/" class="article-date">
	  <time datetime="2020-02-07T16:00:00.000Z" itemprop="datePublished">二月 8, 2020</time>
	</a>

       
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>一開始在撰寫 Blog 都是使用  VSCode  來進行，儘管  VSCode  可以在編寫的過程中即時預覽出渲染的畫面結果，但效率仍然不是很好，就算  Markdown  已經讓我們用很輕鬆的方式來寫  HTML  內容，但仍然要去瞭解一些相關的語法，於是後來就找到一個非常好用的  Markdown  編輯利器  MarkText  ，它是一個可視化的  Markdown  編輯器，可以讓你在編寫的過程中非常流暢且迅速，透過互動式介面即可完成很多需要輸入語法才能達成的功能。</p>
<p>首先到官網根據你的系統來下載  <a href="https://marktext.app/" target="_blank" rel="noopener">MarkText</a>  ：</p>
<img src="2020-02-08-MarkText-1.PNG" style="width:100%;">

<p>完成安裝後執行 MarkText ，可以在左上角看到一個設定按鈕，點擊後會有一排選單，倒數第三個選項 Theme 可以根據你想要的風格來更換編輯器主題：</p>
<img src="2020-02-08-MarkText-2.gif" style="width:100%;">

<h1 id="MarkText-功能"><a href="#MarkText-功能" class="headerlink" title="MarkText 功能"></a>MarkText 功能</h1><p>接下來介紹 MarkText 的主要功能，當你輸入完一段文字後可以發現最前面有一個符號可以點選，點擊後會跳出選單讓你可以變更該段文字的樣式，不管是標題、副標題、粗體、斜線或是 HTML 及 JavaScript 程式碼區塊都可以設定，讓你用更直覺的方式來編寫 Markdown 。</p>
<img src="2020-02-08-MarkText-3.gif" style="width:100%;">

<p>也可以設定各種清單樣式，或是表格的欄數都能直接設定，撰寫起來非常方便快速：</p>
<img src="2020-02-08-MarkText-4.gif" style="width:100%;">

<p>透過  VSCode  打開  .md  檔案，可以發現剛才在  MarkText  編輯的內容都自動幫你轉成  Markdown  語法：</p>
<img src="2020-02-08-MarkText-5.PNG" style="width:100%;">

<p>透過  MarkText  讓你在編寫  Markdown  的過程像在編輯文件一樣方便，就算  Markdown  語法不熟悉也能輕鬆進行編寫。</p>
<h1 id="參考文獻"><a href="#參考文獻" class="headerlink" title="參考文獻"></a>參考文獻</h1><ol>
<li><a href="https://www.youtube.com/watch?v=tFP1E6KfxpE" target="_blank" rel="noopener">MarkText 超入門 - 撰寫Markdown的超級利器</a></li>
</ol>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="tags/Editor/" rel="tag">Editor</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="tags/Markdown/" rel="tag">Markdown</a></li></ul>

      
    </footer>
    <hr class="entry-footer-hr">
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-2020-02-01-JavaScript-28"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="2020/02/02/2020-02-01-JavaScript-28/">JavaScript - 音樂播放器</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="2020/02/02/2020-02-01-JavaScript-28/" class="article-date">
	  <time datetime="2020-02-01T16:00:00.000Z" itemprop="datePublished">二月 2, 2020</time>
	</a>

       
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <img src="logo.svg" style="width:15%;">

<br/>

<p><br/><br/></p>
<p>此範例程式碼同步於 <a href="https://codepen.io/BobbyLashley/pen/LYEwZeR" target="_blank" rel="noopener">CodePen</a> 及 <a href="https://github.com/Cheng-Yi-Ting/music-player" target="_blank" rel="noopener">GitHub</a> 。</p>
<p>本文教學如何使用 JavaScript 實作簡易音樂播放器，首先建立一個 music 資料夾並將要播放的影音檔放至此資料夾，此範例音樂來源為 <a href="https://www.youtube.com/audiolibrary" target="_blank" rel="noopener">youtube Audio Library</a> 無版權音樂。</p>
<h1 id="製作歌曲選單列表"><a href="#製作歌曲選單列表" class="headerlink" title="製作歌曲選單列表"></a>製作歌曲選單列表</h1><p>首先將 music 資料夾內的音樂檔名列出，利用 ul 及 li 來製作條列式選單：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">"musicSources"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>Slug_Love_87<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>Mosquito_Mojito<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>Groove_Tube<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>Loose_Slip<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>Flutes<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>將 ul 設定 margin-left 與 padding-left 為 0 來取消 ul 左邊的外距與內距，防止 ul 內縮； li 加上 list-style-type:none; 來取消符號顯示。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">ul</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="built_in">rgb</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding-left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#ffffff</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">li</span> &#123;</span><br><span class="line">    <span class="attribute">list-style-type</span>: none;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">30px</span>;</span><br><span class="line">    <span class="attribute">border-bottom</span>: <span class="number">1px</span> solid <span class="built_in">rgb</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">li</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="built_in">rgb</span>(<span class="number">71</span>, <span class="number">71</span>, <span class="number">71</span>);</span><br><span class="line">    <span class="attribute">cursor</span>: pointer;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>以上語法會產生如下表格：</p>
<img src="2020-02-01-JavaScript-28-1.gif" style="width:100%;">

<h1 id="事件委派（-Event-Delegation）"><a href="#事件委派（-Event-Delegation）" class="headerlink" title="事件委派（ Event Delegation）"></a>事件委派（ Event Delegation）</h1><p>如果要替每個 li 都綁定 click event hander ，可以使用 for 迴圈來綁定，也就是有幾個 li 就要加幾次 addEventListener ，之後在新增歌曲還要在綁定一次事件，讓程式碼複雜化。</p>
<p>過去有介紹過瀏覽器事件的運作原理: <a href="https://cheng-yi-ting.github.io/2019/11/15/2019-11-14-JavaScript-12/">DOM - 事件處裡及傳遞機制</a> ，我們可以將 click 事件綁定在 parent 上，藉由 Event Bubbling 來傳遞給 child ，而非直接將事件綁定在 child 上，可以減少監聽器的數量，只要判斷目標(e.target)是哪個項目再去執行即可。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">'load'</span>, () =&gt; &#123;</span><br><span class="line">    <span class="keyword">let</span> musicSources = <span class="built_in">document</span>.querySelector(<span class="string">'#musicSources'</span>);</span><br><span class="line">    musicSources.addEventListener(<span class="string">'click'</span>, musicTarget = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (e.target.tagName.toLowerCase() === <span class="string">'li'</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">document</span>.querySelector(<span class="string">".musicSpan"</span>)) &#123;</span><br><span class="line">                <span class="built_in">document</span>.querySelector(<span class="string">".musicSpan"</span>).remove();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">document</span>.querySelector(<span class="string">"audio"</span>)) &#123;</span><br><span class="line">                <span class="built_in">document</span>.querySelector(<span class="string">"audio"</span>).remove();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">let</span> target = e.target; <span class="comment">//取得按下的歌曲(li)</span></span><br><span class="line">            <span class="keyword">const</span> pn = target.innerText; <span class="comment">//取得歌曲名稱(文字內容)</span></span><br><span class="line">            <span class="keyword">let</span> span = <span class="built_in">document</span>.createElement(<span class="string">'span'</span>) <span class="comment">//建立span元件</span></span><br><span class="line">            span.className = <span class="string">'musicSpan'</span>; <span class="comment">//指定class名稱</span></span><br><span class="line">            span.innerHTML = <span class="string">'4'</span>; <span class="comment">//指定span裡的文字(4表示三角形符號)</span></span><br><span class="line">            target.appendChild(span); <span class="comment">//放入li元件</span></span><br><span class="line">            playMusic(pn); <span class="comment">//播放音樂</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>我們將 click 事件綁定在 id 為 musicSources 的 ul 上，再利用 e.target.tagName 判斷是不是 li 就可以了，讓程式碼簡潔許多，之後如果新增歌曲一樣會綁定 click 事件。</p>
<h2 id="當按下歌曲時，歌曲前方顯示一個三角形符號"><a href="#當按下歌曲時，歌曲前方顯示一個三角形符號" class="headerlink" title="當按下歌曲時，歌曲前方顯示一個三角形符號"></a>當按下歌曲時，歌曲前方顯示一個三角形符號</h2><p>這裡使用 Webdings 字型來產生三角形符號。首先指定字型 font-family: Webdings; ，輸入 4 就是使用三角形符號，在將文字放在 span 內即可。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> target = e.target; <span class="comment">//取得按下的歌曲(li)</span></span><br><span class="line"><span class="keyword">const</span> pn = target.innerText; <span class="comment">//取得歌曲名稱(文字內容)</span></span><br><span class="line"><span class="keyword">let</span> span = <span class="built_in">document</span>.createElement(<span class="string">'span'</span>) <span class="comment">//建立span元件</span></span><br><span class="line">span.className = <span class="string">'musicSpan'</span>; <span class="comment">//指定class名稱</span></span><br><span class="line">span.innerHTML = <span class="string">'4'</span>; <span class="comment">//指定span裡的文字(4表示三角形符號)</span></span><br><span class="line">target.appendChild(span); <span class="comment">//放入li元件</span></span><br><span class="line">playMusic(pn);<span class="comment">//播放音樂</span></span><br></pre></td></tr></table></figure>

<h2 id="播放音樂"><a href="#播放音樂" class="headerlink" title="播放音樂"></a>播放音樂</h2><p>建立 audio 元件並指定路徑來源為 music 資料夾：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">playMusic</span>(<span class="params">a</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> myAudio = <span class="built_in">document</span>.createElement(<span class="string">'audio'</span>);<span class="comment">//建立audio元件</span></span><br><span class="line">    myAudio.setAttribute(<span class="string">"src"</span>, <span class="string">"music/"</span> + a + <span class="string">".mp3"</span>);<span class="comment">//src 音檔路徑，a為傳入的歌曲名稱</span></span><br><span class="line">    myAudio.setAttribute(<span class="string">"controls"</span>, <span class="string">"controls"</span>); <span class="comment">//顯示撥放器</span></span><br><span class="line">    bottom.appendChild(myAudio); <span class="comment">//加入在id名稱為bottom的元件裡</span></span><br><span class="line">    myAudio.play(); <span class="comment">//播放音樂</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>當點擊歌曲時就新增一個 audio 元素，點擊其它歌曲時再將原本的 audio 元素移除，暫停和跳轉可以使用 audio 內建的功能。</p>
<h2 id="隨機播放"><a href="#隨機播放" class="headerlink" title="隨機播放"></a>隨機播放</h2><p>右上角建立隨機播放按鈕，同樣使用 Webdings 字型來產生樣式：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"random"</span> <span class="attr">title</span>=<span class="string">"隨機播放"</span> <span class="attr">onclick</span>=<span class="string">"randomPlay()"</span>&gt;</span>~<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>當點擊按鈕呼叫 randomPlay() 函式，使用 random() 來產生 0~4的整數值，將值帶入 li 標籤的 index ，接著再執行 click 事件就會執行播放音樂程式碼：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">randomPlay</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> num = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * <span class="number">5</span>); <span class="comment">//隨機數0~4</span></span><br><span class="line">    <span class="keyword">let</span> randomLi = <span class="built_in">document</span>.querySelectorAll(<span class="string">'li'</span>)[num]; <span class="comment">//將值帶入 li 的 index</span></span><br><span class="line">    randomLi.click(); <span class="comment">//觸發click事件</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>完整範例執行結果：</p>
<img src="2020-02-01-JavaScript-28-2.gif" style="width:50%;">

<h1 id="參考文獻"><a href="#參考文獻" class="headerlink" title="參考文獻"></a>參考文獻</h1><ol>
<li><a href="http://www.drmaster.com.tw/bookinfo.asp?BookID=MP21907" target="_blank" rel="noopener">JavaScript 精選16堂課：網頁程式設計實作</a></li>
</ol>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="tags/Audio/" rel="tag">Audio</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="tags/Event-Delegation/" rel="tag">Event Delegation</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="tags/HTML5/" rel="tag">HTML5</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="tags/JavaScript/" rel="tag">JavaScript</a></li></ul>

      
    </footer>
    <hr class="entry-footer-hr">
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-2020-01-28-JavaScript-27"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="2020/02/01/2020-01-28-JavaScript-27/">Web Storage</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="2020/02/01/2020-01-28-JavaScript-27/" class="article-date">
	  <time datetime="2020-01-31T16:00:00.000Z" itemprop="datePublished">二月 1, 2020</time>
	</a>

       
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <img src="logo.svg" style="width:15%;">

<br/>

<p><br/><br/></p>
<p><strong>在介紹什麼是 Web Storage 之前，讓我們來瞭解一下 HTTP COOKIES 的作用。</strong></p>
<h1 id="HTTP-COOKIES"><a href="#HTTP-COOKIES" class="headerlink" title="HTTP COOKIES"></a>HTTP COOKIES</h1><p>Client 和 Server 透過 HTTP 協定來進行通訊，但是 HTTP 是無狀態協定(Stateless Protocol)，也就是說每次 Client 對 Server 發出的請求都是獨立的，每一次的請求都無法得知上一次請求的內容與資訊。</p>
<p>我們可以透過 cookie 把 server 所傳送過來的一些資料保存在 Client ，Cookie 常用於會員登入、購物車資訊、使用者設定偏好。</p>
<p>當使用者第一次登入網站， Server 就能將登入的相關資訊進行加密並儲存在 Client 的硬碟或記憶體中，之後 Cleint 發送 request 到 Server 就會附上 Cookie ， Server 就可以直接讀取來減少使用者重複輸入資料的行為。</p>
<h1 id="Web-Storage-概念"><a href="#Web-Storage-概念" class="headerlink" title="Web Storage 概念"></a>Web Storage 概念</h1><p>Web Storage 是 HTML5 的新規範，一種將少量資料儲存於 Client 端的技術，只要支援 Web Storage API 規格的瀏覽器，都能透過 JavaScript 操作。</p>
<p>過去 Cookie 只允許每個網站儲存 4KB 的資料，而 Web Storage 可以儲存 1MB ~  5MB 。 Cookie 在每個 HTTP request 送出時都會被傳送到 Server ，不管有沒有使用到 Cookie 中的資訊，在某種程度上會降低執行的效能與浪費網路頻寬，而且 Cookie 如果沒有加密則不適合放入重要的資訊。</p>
<p>Web Storage 的存取都是在 Client ，與 Cookie 一樣都是使用 key / value 的儲存格式，不會像 Cookie 一樣，隨著 request 發送給 Server 端，因為 Web Storage 只作用在 Client 端瀏覽器，並不會占用頻寬和影響網站效能。</p>
<p>Web Storage 分兩種，一個是 sessionStorage，另一個是 localStorage，兩者主要差別在於生命週期和有效範圍的不同。 localStorage 不會隨著瀏覽器關閉而消失，適合用在需要跨分頁或跨視窗的場合，除非手動清除資料不然關閉瀏覽器後資料還是會一直存在； sessionStorage 則是頁面關閉後資料就會消失，資料只對當前頁面有效，適合用在資料暫時保存的場合。</p>
<h1 id="cookie、localStorage、sessionStorage-異同表"><a href="#cookie、localStorage、sessionStorage-異同表" class="headerlink" title="cookie、localStorage、sessionStorage 異同表"></a>cookie、localStorage、sessionStorage 異同表</h1><table>
<thead>
<tr>
<th align="center">類型</th>
<th align="center">cookie</th>
<th align="center">localStorage</th>
<th align="center">sessionStorage</th>
</tr>
</thead>
<tbody><tr>
<td align="center">大小</td>
<td align="center">4KB</td>
<td align="center">一般為 5MB</td>
<td align="center">一般為 5MB</td>
</tr>
<tr>
<td align="center">生命週期</td>
<td align="center">過期或是執行刪除指令才會消失</td>
<td align="center">執行刪除指令才會消失</td>
<td align="center">頁面關閉後會消失</td>
</tr>
<tr>
<td align="center">有效範圍</td>
<td align="center">同一網站的網頁都可以存取</td>
<td align="center">同一網站的網頁都可以存取</td>
<td align="center">只有在單一分頁能存取</td>
</tr>
<tr>
<td align="center">儲存格式</td>
<td align="center">key / value</td>
<td align="center">key / value</td>
<td align="center">key / value</td>
</tr>
<tr>
<td align="center">連線到 Server 時會自動帶上</td>
<td align="center">會</td>
<td align="center">不會</td>
<td align="center">不會</td>
</tr>
<tr>
<td align="center">安全性</td>
<td align="center">較低</td>
<td align="center">較高</td>
<td align="center">較高</td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<h1 id="瀏覽器支援-Web-Storage"><a href="#瀏覽器支援-Web-Storage" class="headerlink" title="瀏覽器支援 Web Storage"></a>瀏覽器支援 Web Storage</h1><p>可以透過以下方式來判斷瀏覽器是否支援 Web Storage：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span>(Storage) !== <span class="string">"undefined"</span>) &#123;</span><br><span class="line">  <span class="comment">// Code for localStorage/sessionStorage.</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="comment">// Sorry! No Web Storage support..</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="localStorage"><a href="#localStorage" class="headerlink" title="localStorage"></a>localStorage</h1><p>由於同源政策(Same-origin policy)限制，只能存取相同網站的 local storage。</p>
<p>所謂同源是指協定、主機(domain與ip)、埠號 (port) 都必須相同。例如我們有一個網址：<a href="http://www.cyting.com/image/page.html" target="_blank" rel="noopener">http://www.cyting.com/image/page.html</a> ，來判斷下列何者屬於同源：</p>
<table>
<thead>
<tr>
<th align="left">網址</th>
<th align="center">結果</th>
<th align="center">原因</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><a href="http://www.cyting.com/image/activity.html" target="_blank" rel="noopener">http://www.cyting.com/image/activity.html</a></td>
<td align="center">同源</td>
<td align="center"></td>
</tr>
<tr>
<td align="left"><a href="http://www.cyting.com/image/dir/web.html" target="_blank" rel="noopener">http://www.cyting.com/image/dir/web.html</a></td>
<td align="center">同源</td>
<td align="center"></td>
</tr>
<tr>
<td align="left"><a href="https://www.cyting.com/prod.html" target="_blank" rel="noopener">https://www.cyting.com/prod.html</a></td>
<td align="center">不同源</td>
<td align="center">協定不同</td>
</tr>
<tr>
<td align="left"><a href="http://www.cyting.com:8001/dir/region.html" target="_blank" rel="noopener">http://www.cyting.com:8001/dir/region.html</a></td>
<td align="center">不同源</td>
<td align="center">埠號不同</td>
</tr>
<tr>
<td align="left"><a href="http://cyting.demo.com/dir/store.html" target="_blank" rel="noopener">http://cyting.demo.com/dir/store.html</a></td>
<td align="center">不同源</td>
<td align="center">主機不同</td>
</tr>
</tbody></table>
<p>在 HTML5標準，Web Storage 只允許儲存字串資料，存取方式有以下三種：</p>
<h1 id="setItem-amp-getItem"><a href="#setItem-amp-getItem" class="headerlink" title="setItem &amp; getItem"></a>setItem &amp; getItem</h1><p>儲存一個 localStorage 變數 userName ，並指定它的值為 Cyting 。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> name = <span class="string">"Cyting"</span>;</span><br><span class="line">localStorage.setItem(<span class="string">'userName'</span>,name);</span><br></pre></td></tr></table></figure>

<p>使用 getItem 讀取資料：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> value = localStorage.getItem(userName); <span class="comment">// Cyting</span></span><br></pre></td></tr></table></figure>

<h1 id="陣列索引"><a href="#陣列索引" class="headerlink" title="陣列索引"></a>陣列索引</h1><p>儲存語法：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> name = <span class="string">"Cyting"</span>;</span><br><span class="line">localStorage.[<span class="string">"userName"</span>] = name;</span><br></pre></td></tr></table></figure>

<p>讀取語法：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> value = localStorage.[<span class="string">"userName"</span>];</span><br></pre></td></tr></table></figure>

<h1 id="屬性"><a href="#屬性" class="headerlink" title="屬性"></a>屬性</h1><p>儲存語法：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> name = <span class="string">"Cyting"</span>;</span><br><span class="line">localStorage.userName = name;</span><br></pre></td></tr></table></figure>

<p>讀取語法：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> value = localStorage.userName;</span><br></pre></td></tr></table></figure>

<h1 id="刪除-localStorage"><a href="#刪除-localStorage" class="headerlink" title="刪除 localStorage"></a>刪除 localStorage</h1><p>透過呼叫 removeItem 或是 delete 來刪除 localStorage。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">localStorage.removeItem(<span class="string">"userName"</span>)</span><br><span class="line"><span class="keyword">delete</span> localStorage.userName;</span><br><span class="line"><span class="keyword">delete</span> localStorage[<span class="string">"userName"</span>]<span class="string">";</span></span><br></pre></td></tr></table></figure>

<p>如果是想清除 localStorage 的全部資料，可以使用 clear() 方法。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">localStorage.clear();</span><br></pre></td></tr></table></figure>

<h1 id="localStorage-實例"><a href="#localStorage-實例" class="headerlink" title="localStorage 實例"></a>localStorage 實例</h1><p>程式碼同步於<a href="https://codepen.io/BobbyLashley/pen/YzPobWm" target="_blank" rel="noopener">CodePen</a></p>
<p>使用者輸入姓名後可點擊「儲存至local storage」按鈕將資料儲存起來，當點擊「從local storage讀取資料」時就會讀取剛才輸入的姓名並輸出在頁面上，而「清除local storage資料」按鈕會將儲存的資料進行清空。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span> /&gt;</span> 請輸入您的姓名：</span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">id</span>=<span class="string">"inputname"</span> <span class="attr">value</span>=<span class="string">""</span>&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"show_LocalStorage"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btn_save"</span>&gt;</span>儲存至local storage<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btn_load"</span>&gt;</span>從local storage讀取資料<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btn_clear"</span>&gt;</span>清除local storage資料<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">'load'</span>, () =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span>(Storage) == <span class="string">"undefined"</span>) &#123;</span><br><span class="line">        alert(<span class="string">"您的瀏覽器不支援Web Storage"</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        btn_save.addEventListener(<span class="string">"click"</span>, saveToLocalStorage);</span><br><span class="line">        btn_load.addEventListener(<span class="string">"click"</span>, loadFromLocalStorage);</span><br><span class="line">        btn_clear.addEventListener(<span class="string">"click"</span>, clearLocalStorage);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">saveToLocalStorage</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    localStorage.username = inputname.value;</span><br><span class="line">    show_LocalStorage.innerHTML = <span class="string">"儲存成功!"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">loadFromLocalStorage</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (localStorage.username) &#123;</span><br><span class="line">        show_LocalStorage.innerHTML = <span class="string">"歡迎 "</span> + localStorage.username + <span class="string">" !"</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        show_LocalStorage.innerHTML = <span class="string">"暫無資料"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">clearLocalStorage</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    localStorage.clear();</span><br><span class="line">    loadFromLocalStorage();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="2020-01-28-JavaScript-27-1.gif" style="width:100%;">

<p>當使用者將瀏覽器關閉仍可以成功讀取資料，因為儲存在 local storage 的資料不會因為關閉瀏覽器而消失。</p>
<h1 id="sessionStorage"><a href="#sessionStorage" class="headerlink" title="sessionStorage"></a>sessionStorage</h1><p>sessionStorage 只能保存在單一的瀏覽器視窗或分頁上，瀏覽器一關閉儲存的資料就會消失，主要是用於保存一些臨時的資料，避免使用者重整頁面的時候資料就不見了。使用 sessionStorage 語法與 localStorage 相同。</p>
<p>儲存：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> name = <span class="string">"Cyting"</span>;</span><br><span class="line">sessionStorage.setItem(<span class="string">'userName'</span>,name);</span><br><span class="line">sessionStorage.[<span class="string">"userName"</span>] = name;</span><br><span class="line">sessionStorage.userName = name;</span><br></pre></td></tr></table></figure>

<p>讀取：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> value = sessionStorage.getItem(userName);</span><br><span class="line"><span class="keyword">let</span> value = sessionStorage.[<span class="string">"userName"</span>];</span><br><span class="line"><span class="keyword">let</span> value = sessionStorage.userName;</span><br></pre></td></tr></table></figure>

<p>清除：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sessionStorage.removeItem(<span class="string">"userName"</span>)</span><br><span class="line"><span class="keyword">delete</span> sessionStorage.userName;</span><br><span class="line"><span class="keyword">delete</span> sessionStorage[<span class="string">"userName"</span>]<span class="string">";</span></span><br></pre></td></tr></table></figure>

<p>如果是想清除 sessionStorage 的全部資料，可以使用 clear() 方法：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sessionStorage.clear();</span><br></pre></td></tr></table></figure>

<h1 id="參考文獻"><a href="#參考文獻" class="headerlink" title="參考文獻"></a>參考文獻</h1><ol>
<li><p><a href="http://www.drmaster.com.tw/bookinfo.asp?BookID=MP21907" target="_blank" rel="noopener">JavaScript 精選16堂課：網頁程式設計實作</a></p>
</li>
<li><p><a href="https://ithelp.ithome.com.tw/articles/10203525" target="_blank" rel="noopener">Day20 localStorage、sessionStorage</a></p>
</li>
<li><p><a href="https://medium.com/@bebebobohaha/cookie-localstorage-sessionstorage-%E5%B7%AE%E7%95%B0-9e1d5df3dd7f" target="_blank" rel="noopener">Cookie、LocalStorage、SessionStorage 差異</a></p>
</li>
<li><p><a href="https://medium.com/%E9%BA%A5%E5%85%8B%E7%9A%84%E5%8D%8A%E8%B7%AF%E5%87%BA%E5%AE%B6%E7%AD%86%E8%A8%98/%E7%AD%86%E8%A8%98-http-cookie-%E5%92%8C-session-%E4%BD%BF%E7%94%A8-19bc740e49b5" target="_blank" rel="noopener">[筆記] HTTP Cookies 和 Session 使用</a></p>
</li>
<li><p><a href="https://progressbar.tw/posts/91" target="_blank" rel="noopener">[不是工程師] Cookie 是文檔還是餅乾？簡述HTTP網頁紀錄會員資訊的一大功臣。</a></p>
</li>
<li><p><a href="https://dotblogs.com.tw/jimmyyu/archive/2011/03/27/html5-client-storage.aspx" target="_blank" rel="noopener">[HTML5]簡述HTML5的Client端暫存-localStorage/sessionStorage</a></p>
</li>
<li><p><a href="https://dotblogs.com.tw/shadow/2014/07/10/145879" target="_blank" rel="noopener">[Html 5] WebStorage - localStorage和sessionStorage</a></p>
</li>
</ol>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="tags/HTML5/" rel="tag">HTML5</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="tags/JavaScript/" rel="tag">JavaScript</a></li></ul>

      
    </footer>
    <hr class="entry-footer-hr">
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-2020-01-19-JavaScript-26"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="2020/01/23/2020-01-19-JavaScript-26/">JavaScript - Async/Await</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="2020/01/23/2020-01-19-JavaScript-26/" class="article-date">
	  <time datetime="2020-01-22T16:00:00.000Z" itemprop="datePublished">一月 23, 2020</time>
	</a>

       
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <img src="logo.svg" style="width:15%;">

<br/>

<p><br/><br/></p>
<h1 id="Async-functions"><a href="#Async-functions" class="headerlink" title="Async functions"></a>Async functions</h1><p>在上一篇中我們提到了 <a href="https://cheng-yi-ting.github.io/2020/01/18/2020-01-11-JavaScript-25/">Promise</a> ，避免使用多層 callback 所造成程式碼難以維護的問題。而 ES7 提供了 async/await 語法，可以看成是 Promise 的語法糖，更方便的寫出非同步程式碼。</p>
<p>async 所宣告的函式，會回傳一個 Promise ，使用方法就是在宣告的函式前增加 async 關鍵字，說明這是一個非同步的函式。</p>
<p>下面的範例相當於回傳一個 resolved promise：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>也可以寫成這樣：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Promise</span>.resolve(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Await"><a href="#Await" class="headerlink" title="Await"></a>Await</h1><p>await 只能在 async 函式中使用，否則會拋出 syntax error 。 await 表示等待 Promise 的狀態為 resolve 或 reject 才會繼續執行函式，讓我們看一下例子：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">main</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> p = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> resolve(<span class="string">"done!"</span>), <span class="number">1000</span>)</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> result = <span class="keyword">await</span> p; <span class="comment">// 等待 promise resolves </span></span><br><span class="line">  <span class="built_in">console</span>.log(result); <span class="comment">// "done!"</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">main();</span><br></pre></td></tr></table></figure>

<p>範例中的程式會等待 p 一秒鐘後才會進行輸出。</p>
<p>下面為一個簡易的 async/await 例子：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">p</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      value++</span><br><span class="line">      resolve(value)</span><br><span class="line">    &#125;, <span class="number">1000</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">main</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"> <span class="keyword">let</span> x1 = <span class="keyword">await</span> p(<span class="number">1</span>);</span><br><span class="line"> <span class="keyword">let</span> x2 = <span class="keyword">await</span> p(<span class="number">2</span>);</span><br><span class="line"> <span class="keyword">let</span> x3 = <span class="keyword">await</span> <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line"> <span class="built_in">console</span>.log(x1 + x2 + x3); <span class="comment">// 8</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">main();</span><br></pre></td></tr></table></figure>

<p>因為 async 函式相當於回傳一個 Promise ，所以我們一樣可以用操作 Promise Chain 的方式，把 Promise 一層一層的往下傳：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">main</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"> <span class="built_in">console</span>.log(<span class="string">"Start main function"</span> );</span><br><span class="line"> <span class="keyword">let</span> x1 = <span class="keyword">await</span> p1(<span class="number">1</span>); <span class="comment">// 2</span></span><br><span class="line"> <span class="keyword">let</span> x2 = <span class="keyword">await</span> p2(<span class="number">2</span>); <span class="comment">// 4</span></span><br><span class="line"> <span class="keyword">let</span> x3 = <span class="keyword">await</span> <span class="number">3</span>; <span class="comment">// 3</span></span><br><span class="line"> <span class="keyword">await</span> p2(<span class="number">4</span>); <span class="comment">// 6</span></span><br><span class="line"> <span class="keyword">return</span> x1 + x2; <span class="comment">// 6</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">main().then(<span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> value + <span class="number">2</span> ; <span class="comment">// 8</span></span><br><span class="line">&#125;).then(p1)</span><br><span class="line">.then(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(value);  <span class="comment">// 9</span></span><br><span class="line">&#125;).catch(<span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'error:'</span>, error)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">p1</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"P1 value is :"</span> + value);</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      value++</span><br><span class="line">      resolve(value)</span><br><span class="line">    &#125;, <span class="number">1000</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">p2</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">"P2 value is :"</span> + value);</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      value+=<span class="number">2</span></span><br><span class="line">      resolve(value)</span><br><span class="line">    &#125;, <span class="number">1000</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*Output:</span></span><br><span class="line"><span class="comment">Start main function</span></span><br><span class="line"><span class="comment">P1 value is :1</span></span><br><span class="line"><span class="comment">P2 value is :2</span></span><br><span class="line"><span class="comment">P2 value is :4</span></span><br><span class="line"><span class="comment">P1 value is :8</span></span><br><span class="line"><span class="comment">9</span></span><br><span class="line"><span class="comment">/*</span></span><br></pre></td></tr></table></figure>

<p>await 可以搭配 Promise.all 和 Promise.race 來使用：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">main</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"> <span class="built_in">console</span>.log(<span class="string">"Start main function"</span> );</span><br><span class="line"> <span class="keyword">const</span> [x1, x2] = <span class="keyword">await</span> <span class="built_in">Promise</span>.all([p(<span class="number">1000</span>), p(<span class="number">2000</span>)]);</span><br><span class="line"> <span class="keyword">const</span> x3 = <span class="keyword">await</span> <span class="built_in">Promise</span>.race([p(<span class="number">1000</span>), p(<span class="number">2000</span>), p(<span class="number">3000</span>)]);</span><br><span class="line"> <span class="keyword">return</span> x1 + x2 + x3; <span class="comment">// 4000</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">main().then(<span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`value is <span class="subst">$&#123;value&#125;</span>`</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">p</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (value &lt; <span class="number">1000</span> )&#123;</span><br><span class="line">         reject(<span class="string">'Unexpected condition'</span>)</span><br><span class="line">      &#125;</span><br><span class="line">      resolve(value)</span><br><span class="line">    &#125;, value)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="錯誤處理"><a href="#錯誤處理" class="headerlink" title="錯誤處理"></a>錯誤處理</h1><p>錯誤處理的方式使用 try / catch ：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> isEven = <span class="function">(<span class="params">num</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (num % <span class="number">2</span> == <span class="number">0</span>) &#123;</span><br><span class="line">            resolve(<span class="string">'even'</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            reject(<span class="string">'odd'</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> verify = <span class="keyword">async</span> (num) =&gt; &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> sign = <span class="keyword">await</span> isEven(num);</span><br><span class="line">        <span class="built_in">console</span>.log(sign);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(err);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">verify(<span class="number">8</span>); <span class="comment">// even</span></span><br><span class="line">verify(<span class="number">15</span>); <span class="comment">// odd</span></span><br><span class="line">verify(<span class="string">'Ian'</span>); <span class="comment">// odd</span></span><br></pre></td></tr></table></figure>

<p>只用 catch 也行：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> verify = <span class="keyword">async</span> (num) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> sign = <span class="keyword">await</span> isEven(num);</span><br><span class="line">    <span class="built_in">console</span>.log(sign);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">verify(<span class="string">'Ian'</span>).catch(<span class="function"><span class="params">err</span> =&gt;</span> <span class="built_in">console</span>.log(err)); <span class="comment">// odd</span></span><br></pre></td></tr></table></figure>

<p>如果是採用以下的寫法，因為 await isEven(15) 的結果會是 reject ，所以在 x2 就會進入到 catch ，表示後面的 x3 就不會執行：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> isEven = <span class="function">(<span class="params">num</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (num % <span class="number">2</span> == <span class="number">0</span>) &#123;</span><br><span class="line">            resolve(<span class="string">'even'</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            reject(<span class="string">'odd'</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> verify = <span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> x1 = <span class="keyword">await</span> isEven(<span class="number">8</span>);</span><br><span class="line">    <span class="keyword">const</span> x2 = <span class="keyword">await</span> isEven(<span class="number">15</span>);</span><br><span class="line">    <span class="keyword">const</span> x3 = <span class="keyword">await</span> isEven(<span class="string">'Ian'</span>);</span><br><span class="line">    <span class="keyword">return</span> x1</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">verify()</span><br><span class="line">  .then(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(value)</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(<span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'error:'</span>, error)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h1 id="async-await-and-promise-then-catch"><a href="#async-await-and-promise-then-catch" class="headerlink" title="async/await and promise.then/catch"></a>async/await and promise.then/catch</h1><p>透過在 await 我們就可以很容易的控制非同步執行， 再搭配 try / catch 來處理例外狀況，因為在全域環境中無法使用 await ，所以這時候就可以透過 .then / catch 來控制整個流程。</p>
<h1 id="參考文獻"><a href="#參考文獻" class="headerlink" title="參考文獻"></a>參考文獻</h1><ol>
<li><a href="https://pjchender.github.io/2017/09/26/js-async-and-await-in-javascript/" target="_blank" rel="noopener">[JS] Async and Await in JavaScript | PJCHENder 私房菜</a></li>
<li><a href="https://ithelp.ithome.com.tw/articles/10223362" target="_blank" rel="noopener">JS 原力覺醒 Day16 - Async / Await：Promise 語法糖 </a></li>
<li><a href="https://ithelp.ithome.com.tw/articles/10205116" target="_blank" rel="noopener">Day25 優雅的 Await、Async</a></li>
<li><a href="https://javascript.info/async-await" target="_blank" rel="noopener">Async/await</a></li>
<li><a href="https://attacomsian.com/blog/async-await-javascript" target="_blank" rel="noopener">How to use async/await in JavaScript</a></li>
</ol>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="tags/ES7/" rel="tag">ES7</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="tags/JavaScript/" rel="tag">JavaScript</a></li></ul>

      
    </footer>
    <hr class="entry-footer-hr">
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-2020-01-11-JavaScript-25"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="2020/01/18/2020-01-11-JavaScript-25/">JavaScript - Promise</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="2020/01/18/2020-01-11-JavaScript-25/" class="article-date">
	  <time datetime="2020-01-17T16:00:00.000Z" itemprop="datePublished">一月 18, 2020</time>
	</a>

       
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <img src="logo.svg" style="width:15%;">

<br/>

<p><br/><br/></p>
<p>過去以 Callback 撰寫非同步會容易在呼叫多層之後產生「Callback Hell」難以維護的問題，而 ES6 提供 Promise 來更方便的執行非同步。關於 JavaScript 執行方式、非同步及 Callback 原理解釋請參考前文： </p>
<ul>
<li><p><a href="https://cheng-yi-ting.github.io/2020/01/04/2020-01-04-JavaScript-23/">JavaScript 非同步執行 （Ascynchronous）</a></p>
</li>
<li><p><a href="https://cheng-yi-ting.github.io/2020/01/10/2020-01-04-JavaScript-24/">JavaScript - Call Stack , Event Queue &amp; Event Loop</a></p>
</li>
<li><p><a href="https://cheng-yi-ting.github.io/2019/11/16/2019-11-16-JavaScript-14/">JavaScript Callback Function</a></p>
</li>
</ul>
<p>在還沒有  <code>Promise</code>  的時候，我們為了控制多個函式間執行的順序，就會透過 Callback 的形式將 function 當作參數傳進去：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 為了確保先執行 first 再執行 second</span></span><br><span class="line"><span class="comment">// 我們在 first 加上 callback 參數</span></span><br><span class="line"><span class="keyword">var</span> first = <span class="function"><span class="keyword">function</span>(<span class="params">callback</span>)</span>&#123;</span><br><span class="line">  setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"This is first."</span>);</span><br><span class="line"></span><br><span class="line">    callback();</span><br><span class="line">  &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> second=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"This is second."</span>);</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 將 second 作為參數帶入 first()</span></span><br><span class="line">first(second);</span><br><span class="line"><span class="comment">//"This is first."</span></span><br><span class="line"><span class="comment">//"This is second."</span></span><br></pre></td></tr></table></figure>

<p>無論  <code>first()</code>  在執行的時候要等多久，  <code>second()</code>  都會等到  <code>first()</code>  執行完才會執行。也可以寫成下面這樣：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">first</span>(<span class="params">callback</span>) </span>&#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"This is first."</span>);</span><br><span class="line">        callback()</span><br><span class="line">    &#125;, <span class="number">1000</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">second</span>(<span class="params">callback</span>) </span>&#123;</span><br><span class="line">    callback(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"This is second."</span>);</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line">second(first)</span><br><span class="line"></span><br><span class="line"><span class="comment">//"This is first."</span></span><br><span class="line"><span class="comment">//"This is second."</span></span><br></pre></td></tr></table></figure>

<p>如果再增加 Callback 的數量：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">first</span>(<span class="params">callback2</span>) </span>&#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"This is first."</span>);</span><br><span class="line">        callback2()</span><br><span class="line">    &#125;, <span class="number">1000</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">second</span>(<span class="params">callback</span>) </span>&#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"This is second."</span>);</span><br><span class="line">        callback()</span><br><span class="line">    &#125;, <span class="number">1000</span>)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">third</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"This is third."</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">main</span>(<span class="params">callback</span>) </span>&#123;</span><br><span class="line">    first(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        second(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">            callback()</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line">main(third)</span><br><span class="line"></span><br><span class="line"><span class="comment">//"This is first."</span></span><br><span class="line"><span class="comment">//"This is second."</span></span><br><span class="line"><span class="comment">//"This is second."</span></span><br></pre></td></tr></table></figure>

<p>當 Callback 太多層就會變成非常複雜的巢狀結構：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">first(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    second(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        third(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">            fourth(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="comment">// ......</span></span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h1 id="Promise"><a href="#Promise" class="headerlink" title="Promise"></a>Promise</h1><p> <code>Promise</code>  提供的新語法讓非同步更加直觀，讓我們看一下它的建構函式：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>( <span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123; ... &#125; )</span><br></pre></td></tr></table></figure>

<p>下面是箭頭函式的寫法：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>( <span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123; ... &#125; )</span><br></pre></td></tr></table></figure>

<h2 id="Promise-的狀態與流程"><a href="#Promise-的狀態與流程" class="headerlink" title="Promise 的狀態與流程"></a>Promise 的狀態與流程</h2><p>Promise 有三種 state(狀態)</p>
<ul>
<li><p>pending：等待(還在執行中且結束狀態未知)</p>
</li>
<li><p>resolved/fullfilled：完成/成功</p>
</li>
<li><p>rejected：拒絕/失敗</p>
</li>
</ul>
<p>Promise 運作流程圖：</p>
<div>
<img src="1.png" style="width:100%;">
</div>

<div style="text-align:center;">來源：<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noopener">MDN</a></div>

<p> <code>Promise</code>  物件中包含兩個參數： <code>resolve</code>  與  <code>reject</code>  ，   <code>then</code>  會接收  <code>resolve</code>  的 value， <code>catch</code>  則接收  <code>reject</code>  的 value。</p>
<p>讓我們看一個基本的 Promise 範例：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> p = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">      setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">           <span class="keyword">let</span> value  = <span class="number">1</span></span><br><span class="line">           <span class="built_in">console</span>.log(value);</span><br><span class="line">           resolve(value);</span><br><span class="line">       &#125;, <span class="number">1000</span>);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//Promise fullfilled handler</span></span><br><span class="line">p.then(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 在 p 被 resolve 時執行</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'success:'</span> + value)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//Promise rejected handler</span></span><br><span class="line">p.catch(<span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 在 p 被 reject 時執行</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'error:'</span>, error)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="Pending"><a href="#Pending" class="headerlink" title="Pending"></a>Pending</h2><p>當  <code>Promise</code>  沒有  <code>resolve</code>  或是  <code>reject</code>  的時候，程式將會一直處在  <code>pending</code>  狀態：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> p = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;&#125;);</span><br><span class="line">p.then(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line"> <span class="built_in">console</span>.log(<span class="string">'success'</span>);</span><br><span class="line">&#125;)</span><br><span class="line">p.catch(<span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line"> <span class="built_in">console</span>.log(<span class="string">'error:'</span>, error);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>例如：送出一個請求一直沒有收到回應時， Promise 就會一直處於 pending 狀態。</p>
<h2 id="Promise-Chain"><a href="#Promise-Chain" class="headerlink" title="Promise Chain"></a>Promise Chain</h2><p>我們可以在  <code>Promise</code>  使用  <code>.then</code>  來進行串接，透過在  <code>.then</code>  裡面  <code>return</code>  一個值，讓這個回傳值以  <code>Promise</code>  物件的形式傳到下一個  <code>.then</code>  ，形成 Promise Chain：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> p = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">      setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">           <span class="keyword">let</span> value = <span class="number">1</span>;</span><br><span class="line">           resolve(value);</span><br><span class="line">       &#125;, <span class="number">1000</span>);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">p.then(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 得到 resolve 內的值</span></span><br><span class="line">  <span class="built_in">console</span>.log(value); <span class="comment">// 1</span></span><br><span class="line">  <span class="keyword">return</span>  value+<span class="number">1</span>;</span><br><span class="line">&#125;).then(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 得到上一個 .then return 的值</span></span><br><span class="line">  <span class="built_in">console</span>.log(value); <span class="comment">// 2</span></span><br><span class="line">  <span class="keyword">return</span> value+<span class="number">1</span>;</span><br><span class="line">&#125;).then(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 得到上一個 .then return 的值</span></span><br><span class="line">  <span class="built_in">console</span>.log(value); <span class="comment">// 3</span></span><br><span class="line">&#125;).catch(<span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'error:'</span>, error)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p> <code>catch</code>  如果是串在中間，在  <code>new Promise</code>  的時候是  <code>reject</code> ，會導致前面  <code>.then</code>  都不會被執行:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> p = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">      setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">           <span class="keyword">let</span> value = <span class="number">1</span>;</span><br><span class="line">           reject(value);</span><br><span class="line">       &#125;, <span class="number">1000</span>);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">p.then(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'Start'</span>); </span><br><span class="line">  <span class="keyword">return</span>  value+<span class="number">1</span>;</span><br><span class="line">&#125;).catch(<span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'error:'</span>, error)</span><br><span class="line">&#125;).then(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'End'</span>); </span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//error: 1</span></span><br><span class="line"><span class="comment">//End</span></span><br></pre></td></tr></table></figure>

<h2 id="Promise-使用範例"><a href="#Promise-使用範例" class="headerlink" title="Promise 使用範例"></a>Promise 使用範例</h2><p>我們可以在  <code>.then</code>  中  <code>return</code>  一個  <code>new Promise</code>  。</p>
<p>範例一：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> p = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> value = <span class="number">1</span>;</span><br><span class="line">    resolve(value) </span><br><span class="line">  &#125;, <span class="number">1000</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">p.then(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"This is the first value :"</span> + value);</span><br><span class="line">  <span class="keyword">return</span> value + <span class="number">1</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">.then(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"This is the second value :"</span> + value);</span><br><span class="line">  <span class="comment">// return 一個 new Promise</span></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      resolve(value + <span class="number">2</span>)</span><br><span class="line">    &#125;, <span class="number">1000</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 等 Promise resolve 後才會執行。</span></span><br><span class="line">.then(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"This is the third value :"</span> + value);</span><br><span class="line">&#125;)</span><br><span class="line">.catch(<span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'error:'</span>, error)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">/*Output:</span></span><br><span class="line"><span class="comment">This is the first value: 1</span></span><br><span class="line"><span class="comment">This is the second value: 2</span></span><br><span class="line"><span class="comment">This is the third value: 4</span></span><br><span class="line"><span class="comment">/*</span></span><br></pre></td></tr></table></figure>

<p>範例二：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">p</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      value++</span><br><span class="line">      resolve(value)</span><br><span class="line">    &#125;, <span class="number">1000</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">p(<span class="number">1</span>)</span><br><span class="line">  .then(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"This is the first value :"</span> + value);</span><br><span class="line">    <span class="keyword">return</span> p(value+<span class="number">1</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"This is the second value :"</span> + value);</span><br><span class="line">    <span class="keyword">return</span> p(value+<span class="number">1</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">   .then(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"This is the third value :"</span> + value);</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">/*Output:</span></span><br><span class="line"><span class="comment">This is the first value: 2</span></span><br><span class="line"><span class="comment">This is the second value: 4</span></span><br><span class="line"><span class="comment">This is the third value: 6</span></span><br><span class="line"><span class="comment">/*</span></span><br></pre></td></tr></table></figure>

<p>範例三：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">p</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">"This value is :"</span> + value);</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      value++</span><br><span class="line">      resolve(value)</span><br><span class="line">    &#125;, <span class="number">1000</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">p(<span class="number">1</span>)</span><br><span class="line">  .then(p)</span><br><span class="line">  .then(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(value)</span><br><span class="line">    <span class="keyword">return</span> value+<span class="number">2</span></span><br><span class="line">  &#125;)</span><br><span class="line">  .then(p)</span><br><span class="line">  .catch(<span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'error:'</span>, error)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">/*Output:</span></span><br><span class="line"><span class="comment">This value is :1</span></span><br><span class="line"><span class="comment">This value is :2</span></span><br><span class="line"><span class="comment">3</span></span><br><span class="line"><span class="comment">This value is :5</span></span><br><span class="line"><span class="comment">/*</span></span><br></pre></td></tr></table></figure>

<p>範例四：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> p = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">      setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">           <span class="keyword">let</span> value = <span class="number">1</span>;</span><br><span class="line">           resolve(value);</span><br><span class="line">       &#125;, <span class="number">1000</span>);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">funA</span> (<span class="params">value</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"The value of function A is :"</span> + value);</span><br><span class="line">  <span class="keyword">const</span> data = funC(value)</span><br><span class="line">  <span class="keyword">return</span> data + <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">funB</span> (<span class="params">value</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"The value of function B is :"</span> + value);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">funC</span> (<span class="params">value</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> value + <span class="number">2</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">p.then(funA)</span><br><span class="line"> .then(funB)</span><br><span class="line"></span><br><span class="line"><span class="comment">/*Output:</span></span><br><span class="line"><span class="comment">The value of function A is :1</span></span><br><span class="line"><span class="comment">The value of function B is :4</span></span><br><span class="line"><span class="comment">/*</span></span><br></pre></td></tr></table></figure>

<h2 id="Promise-錯誤處理"><a href="#Promise-錯誤處理" class="headerlink" title="Promise 錯誤處理"></a>Promise 錯誤處理</h2><p>通常我們會將  .<code>catch</code>  放在最後面做錯誤處裡，當其中一個  <code>.then</code>  發生錯誤時，就會跳到  <code>.catch</code>  ，而  <code>.catch</code>  之後的  .<code>then</code>  皆不會執行。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">p</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (value &gt; <span class="number">2</span>)&#123;</span><br><span class="line">      reject(<span class="string">'Unexpected condition'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      value++</span><br><span class="line">      resolve(value)</span><br><span class="line">    &#125;, <span class="number">1000</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">p(<span class="number">1</span>)</span><br><span class="line">.then((<span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"This is the first value :"</span> + value);</span><br><span class="line">  <span class="keyword">return</span> p(value)</span><br><span class="line">&#125;))</span><br><span class="line">.then((<span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"This is the second value :"</span> + value);</span><br><span class="line">  <span class="keyword">return</span> p(value)</span><br><span class="line">&#125;))</span><br><span class="line">.then((<span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"This is the third value :"</span> + value);</span><br><span class="line">  <span class="keyword">return</span> p(value)</span><br><span class="line">&#125;))</span><br><span class="line">.catch(<span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line"> <span class="built_in">console</span>.log(error)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">/*Output:</span></span><br><span class="line"><span class="comment">This is the first value :2</span></span><br><span class="line"><span class="comment">This is the second value :3</span></span><br><span class="line"><span class="comment">Unexpected condition</span></span><br><span class="line"><span class="comment">/*</span></span><br></pre></td></tr></table></figure>

<h2 id="Promise-all"><a href="#Promise-all" class="headerlink" title="Promise.all"></a>Promise.all</h2><p> <code>Promise.all</code>  可以傳入一個以上的  <code>Promise</code>  並同時執行，等到所有的  <code>Promise</code>  都回應狀態後，才會進入  <code>.then</code>  。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">p</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (value &lt; <span class="number">1000</span> )&#123;</span><br><span class="line">         reject(<span class="string">'Unexpected condition'</span>)</span><br><span class="line">      &#125;</span><br><span class="line">      resolve(value)</span><br><span class="line">    &#125;, value)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Promise</span>.all([p(<span class="number">1000</span>), p(<span class="number">2000</span>), p(<span class="number">3000</span>)]).then(<span class="function">(<span class="params">value</span>)=&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'This value is :'</span>, value);</span><br><span class="line">&#125;).catch( <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(err)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">[This value is : 1000 , This value is : 2000 , This value is : 3000]</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<p>如果其中一個  <code>Promise</code>  中有出現  <code>reject</code>  ，則直接進入  <code>.catch</code>  階段，而不會收到其他  <code>Promise resolve</code>  的回傳值。</p>
<h2 id="Promise-race"><a href="#Promise-race" class="headerlink" title="Promise.race"></a>Promise.race</h2><p><code>Promise.race</code> 一樣可以傳入多個  <code>Promise</code>  並同時執行，但只回傳  <code>Promise</code>  中最快完成的，並接著執行  <code>.then</code>  ，而其他的  <code>Promise</code>  皆不會執行。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">p</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      resolve(value)</span><br><span class="line">    &#125;, value)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Promise</span>.race([p(<span class="number">1000</span>), p(<span class="number">2000</span>), p(<span class="number">3000</span>)]).then(<span class="function">(<span class="params">value</span>)=&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'This value is :'</span>, value);</span><br><span class="line">&#125;).catch( <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(err)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">This value is : 1000</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h1 id="參考文獻"><a href="#參考文獻" class="headerlink" title="參考文獻"></a>參考文獻</h1><ol>
<li><a href="https://yu-jack.github.io/2018/07/22/promise/" target="_blank" rel="noopener">callback, promise, async/await 使用方式教學以及介紹 Part I - Jack Yu | 傑克</a></li>
<li><a href="https://pjchender.github.io/2017/09/26/js-promise-%E7%9A%84%E4%BD%BF%E7%94%A8/" target="_blank" rel="noopener">[JS] Promise 的使用 | PJCHENder 私房菜</a></li>
<li><a href="https://ithelp.ithome.com.tw/articles/10204365" target="_blank" rel="noopener">Day23 Promise 詳解(1/2)</a></li>
<li><a href="https://ithelp.ithome.com.tw/articles/10204718" target="_blank" rel="noopener">Day24 Promise 詳解(2/2)</a></li>
<li><a href="https://ithelp.ithome.com.tw/articles/10197529" target="_blank" rel="noopener">JavaScript - Promise (2)</a></li>
<li><a href="https://ithelp.ithome.com.tw/articles/10222481" target="_blank" rel="noopener">JS 原力覺醒 Day14 - 一生懸命的約定：Promise</a></li>
</ol>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="tags/ES6/" rel="tag">ES6</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="tags/JavaScript/" rel="tag">JavaScript</a></li></ul>

      
    </footer>
    <hr class="entry-footer-hr">
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-2020-01-04-JavaScript-24"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="2020/01/10/2020-01-04-JavaScript-24/">JavaScript - Call Stack , Event Queue &amp; Event Loop</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="2020/01/10/2020-01-04-JavaScript-24/" class="article-date">
	  <time datetime="2020-01-09T16:00:00.000Z" itemprop="datePublished">一月 10, 2020</time>
	</a>

       
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <img src="logo.svg" style="width:15%;">

<br/>

<p><br/><br/></p>
<p><strong>JavaScript是同步執行的程式語言</strong>。</p>
<p><strong>JavaScript 是一個設計為同步執行的程式語言，並且是單執行緒(single-threaded)</strong>。單執行緒可以想像成有一個餐廳的員工同時負責櫃檯和廚房的工作，他的能力強大到可以同時在兩份工作之間快速的切換，仿佛有多個員工在做事的錯覺。</p>
<p>竟然 JavaScript 不是非同步執行程式碼，那為什麼可以監聽瀏覽器的一些事件，像是移動滑鼠、點擊按鈕、捲動頁面、資料請求和檔案寫入這類型的非同步呼叫。</p>
<p><strong>其實瀏覽器不是只有 JavaScript Engine 的存在</strong></p>
<p>整個瀏覽器的運行環境並非只由  JS 引擎組成，瀏覽器還包含許多其他的部分，像是渲染引擎(Rendering Engine)和 HTTP 請求(Http Request)，而瀏覽器也提供 Web API 讓 JS 做應用，像是操作 DOM 節點 、 AJAX 請求、 setTimeout 計時、 Geolocation 地理位置。雖然 JS 引擎身是同步執行，但透過和瀏覽器的其他引擎互動來達到非同步的效果。</p>
<h1 id="Call-Stack"><a href="#Call-Stack" class="headerlink" title="Call Stack"></a>Call Stack</h1><p>JS 的執行堆疊(call stack)記錄了 function 在 JS engine內的執行順序，意思就是程式目前執行到哪邊， call stack 是以同步的方式由上而下執行，採取後進先出 Last In, First Out (LIFO) ，最先執行的函式會被放在 stack 的最下面，如果在函式中執行了  <code>return</code>  ，則會將該函式 pop out 出 stack 。</p>
<p> 請參考以下範例：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"-&gt; start [foo]"</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"&lt;- end   [foo]"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"-&gt; start [bar]"</span>);</span><br><span class="line">  foo()</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"&lt;- end   [bar]"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">bar();</span><br></pre></td></tr></table></figure>

<p>以下為範例各執行階段：</p>
<ol>
<li><p>bar() 會先被執行</p>
</li>
<li><p>bar() 印出 “start”</p>
</li>
<li><p>foo() 執行，此時 bar() 仍然在執行中</p>
</li>
<li><p>foo() 印出 “start”</p>
</li>
<li><p>foo() 印出 “end”</p>
</li>
<li><p>foo() 結束執行</p>
</li>
<li><p>bar() 印出 “end”</p>
</li>
<li><p>bar() 結束執行</p>
</li>
</ol>
<img src="2020-01-04-JavaScript-24-1.gif" style="width:50%;">

<h1 id="Stack-Overflow"><a href="#Stack-Overflow" class="headerlink" title="Stack Overflow"></a>Stack Overflow</h1><p>如果遞迴函式不斷呼叫自己而沒有一個中斷點，則會造成瀏覽器產生 stack error ：</p>
<img src="2020-01-04-JavaScript-24-3.PNG" style="width:100%;">

<h1 id="Event-Queue"><a href="#Event-Queue" class="headerlink" title="Event Queue"></a>Event Queue</h1><p>前面有說過瀏覽器除了有 JS Engine 外還有許多 Web API 可做應用，這些第三方 API 可以與 JS 一起執行，當遇到需要執行 call back 時，則會使用非同步模式，先將這些函式放到 Web APIs 中，在繼續執行主程式，等到時間到或是事件被觸發的時候，再把 call back 推送到  Event Queue(事件佇列) 中，等到整個 JS 執行環境結束後(Call Stack 清空)，才依序呼叫 Event Queue 裡面的函式，採取先進先出 first in, first out (FIFO)。</p>
<p> 請參考以下範例：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"-&gt; start [foo]"</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"&lt;- end   [foo]"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"-&gt; start [bar]"</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"&lt;- end   [bar]"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">baz</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"-&gt; start [baz]"</span>);</span><br><span class="line"></span><br><span class="line">  setTimeout(foo, <span class="number">1000</span>);</span><br><span class="line">  setTimeout(bar, <span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"&lt;- end   [baz]"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">baz();</span><br></pre></td></tr></table></figure>

<p>以下為範例各執行階段：</p>
<ol>
<li><p>baz() 會先被執行</p>
</li>
<li><p>baz() 印出 “start”</p>
</li>
<li><p>foo() 先放到 Web APIs ，等待1秒後移至 Event Queue 中。</p>
</li>
<li><p>bar() 先放到 Web APIs ，等待1秒後移至 Event Queue 中。</p>
</li>
<li><p>baz() 印出 “end”</p>
</li>
<li><p>baz() 執行完成，call stack 清空</p>
</li>
<li><p>透過 Event Loop 機制選取 queue 中的 foo()。</p>
</li>
<li><p>foo() 印出 “start”</p>
</li>
<li><p>foo() 印出 “end”</p>
</li>
<li><p>foo() 執行完成，call stack 清空</p>
</li>
<li><p>透過 Event Loop 機制選取 queue 中的 bar()。</p>
</li>
<li><p>bar() 印出 “start”</p>
</li>
<li><p>bar() 印出 “end”</p>
</li>
<li><p>bar() 執行完成，call stack 清空</p>
</li>
</ol>
<img src="2020-01-04-JavaScript-24-2.gif" style="width:150%;">

<h1 id="Event-Loop"><a href="#Event-Loop" class="headerlink" title="Event Loop"></a>Event Loop</h1><p>JS 當事件發生時，並不是馬上執行指定的函式，而是將事件排入 Event queue ，接著會重複檢查 call stack 是不是空的？如果是空的，再去看 Event queue 中有沒有待執行的函式，有的話就將函式 pop out ，放入 call stack 中執行。</p>
<h1 id="參考文獻"><a href="#參考文獻" class="headerlink" title="參考文獻"></a>參考文獻</h1><ol>
<li><p><a href="https://www.youtube.com/watch?v=8aGhZQkoFbQ" target="_blank" rel="noopener">所以說event loop到底是什麼玩意兒？| Philip Roberts | JSConf EU</a></p>
</li>
<li><p><a href="https://pjchender.github.io/2017/10/13/js-%E7%90%86%E8%A7%A3-javascript-%E4%B8%AD%E7%9A%84%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%92%B0%E3%80%81%E5%A0%86%E7%96%8A%E3%80%81%E4%BD%87%E5%88%97%E5%92%8C%E4%BD%B5%E7%99%BC%E6%A8%A1%E5%BC%8F%EF%BC%88learn-event-loop-stack-queue-and-concurrency-mode-of-javascript-in-depth%EF%BC%89/" target="_blank" rel="noopener">[JS] 理解 JavaScript 中的事件循環、堆疊、佇列和併發模式（Learn event loop, stack, queue, and concurrency mode of JavaScript in depth）</a></p>
</li>
<li><p><a href="https://ithelp.ithome.com.tw/articles/10191094" target="_blank" rel="noopener">Day06　JS是同步還是非同步? </a></p>
</li>
<li><p><a href="https://ithelp.ithome.com.tw/articles/10221944" target="_blank" rel="noopener">JS 原力覺醒 Day13 - Event Queue &amp; Event Loop 、Event Table </a></p>
</li>
<li><p><a href="http://epaper.gotop.com.tw/pdf/AEL022800.pdf" target="_blank" rel="noopener">非同步設計</a></p>
</li>
<li><p><a href="https://www.freecodecamp.org/news/understanding-the-javascript-call-stack-861e41ae61d4/" target="_blank" rel="noopener">Understanding the JavaScript call stack</a></p>
</li>
</ol>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="tags/JavaScript/" rel="tag">JavaScript</a></li></ul>

      
    </footer>
    <hr class="entry-footer-hr">
  </div>
  
</article>

<!-- Table of Contents -->

  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="page/2/">2</a><a class="page-number" href="page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="page/5/">5</a><a class="extend next" rel="next" href="page/2/">下一頁</a>
  </nav>

</section>
          <aside id="sidebar">
  
    <div style="margin: 20px 0;">
	<div id="search-form-wrap">

    <form class="search-form">
        <label style="width: 72%;">
            <span class="screen-reader-text">Search for:</span>
            <input type="search" class="search-field" style="height: 36px; width: 100%;" placeholder=" 搜尋…" value="" name="s" title="Search for:">
        </label>
        <input type="submit" class="search-form-submit" value="搜尋">
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="請輸入關鍵詞..."/>
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: '頁面',
            CATEGORIES: '分類',
            TAGS: '標籤',
            UNTITLED: '(無標題)',
        },
        ROOT_URL: '/',
        CONTENT_URL: 'content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>

<script src="js/insight.js"></script>


</div>
</div>
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">聯絡資訊</h3>
    <div class="widget widget_athemes_social_icons">

    	<ul class="clearfix widget-social-icons">   
    	
   			<li><a href="https://github.com/Cheng-Yi-Ting" target="_blank" rel="noopener" title="Github"><i class="fa fa-github" aria-hidden="true"></i></a></li> 

   		
   			<li><a href="https://www.facebook.com/peterchengapple?ref=bookmarks" target="_blank" rel="noopener" title="Facebook"><i class="fa fa-facebook" aria-hidden="true"></i></a></li> 

   		
   		</ul>


   		<!--
   		<ul class="clearfix widget-social-icons">   		
   		<li class="widget-si-twitter"><a href="http://twitter.com" target="_blank" rel="noopener" title="Twitter"><i class="ico-twitter"></i></a></li> 
		<li class="widget-si-facebook"><a href="http://facebook.com" target="_blank" rel="noopener" title="Facebook"><i class="ico-facebook"></i></a></li>
			<li class="widget-si-gplus"><a href="http://plus.google.com" target="_blank" rel="noopener" title="Google+"><i class="ico-gplus"></i></a></li>
			<li class="widget-si-pinterest"><a href="http://pinterest.com" target="_blank" rel="noopener" title="Pinterest"><i class="ico-pinterest"></i></a></li>
			<li class="widget-si-flickr"><a href="http://flickr.com" target="_blank" rel="noopener" title="Flickr"><i class="ico-flickr"></i></a></li>
			<li class="widget-si-instagram"><a href="http://instagram.com" target="_blank" rel="noopener" title="Instagram"><i class="ico-instagram"></i></a></li>
		</ul> -->

    </div>
  </div>


  
    
  <div class="widget_athemes_tabs">
    <ul id="widget-tab" class="clearfix widget-tab-nav">
      <li class="active"><a>最新文章</a></li>
    </ul>
    <div class="widget">
      <ul>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="2020/02/23/2020-02-23-%E5%93%88%E4%BD%9B%E7%9A%845%E5%A0%82%E5%A4%A7%E8%85%A6%E8%A1%8C%E7%82%BA%E5%AD%B8%E6%80%9D%E8%80%83%E7%9A%84%E8%97%9D%E8%A1%93/">哈佛的5堂大腦行為學思考的藝術</a></h6>
              <span>二月 23, 2020</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="2020/02/22/2020-02-22-%E6%96%9C%E6%A7%93%E9%9D%92%E5%B9%B4/">斜槓青年</a></h6>
              <span>二月 22, 2020</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="2020/02/22/2020-02-22-%E6%96%9C%E6%A7%93%E7%9A%8450%E9%81%93%E9%9B%A3%E9%A1%8C/">斜槓的50道難題</a></h6>
              <span>二月 22, 2020</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="2020/02/08/2020-02-08-HexoBackup/">Hexo 備份</a></h6>
              <span>二月 8, 2020</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="2020/02/08/2020-02-08-MarkText/">Markdown editor - MarkText</a></h6>
              <span>二月 8, 2020</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="2020/02/02/2020-02-01-JavaScript-28/">JavaScript - 音樂播放器</a></h6>
              <span>二月 2, 2020</span>
            </div>

          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分類</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="categories/%E8%AE%80%E6%9B%B8%E5%BF%83%E5%BE%97/">讀書心得</a><span class="category-list-count">3</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">標籤</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="tags/Audio/" rel="tag">Audio</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="tags/CSS/" rel="tag">CSS</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="tags/ES6/" rel="tag">ES6</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="tags/ES7/" rel="tag">ES7</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="tags/Editor/" rel="tag">Editor</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="tags/Event-Delegation/" rel="tag">Event Delegation</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="tags/Git/" rel="tag">Git</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="tags/GitHub/" rel="tag">GitHub</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="tags/HTML/" rel="tag">HTML</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="tags/HTML5/" rel="tag">HTML5</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="tags/Hexo/" rel="tag">Hexo</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="tags/IDE/" rel="tag">IDE</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="tags/JavaScript/" rel="tag">JavaScript</a><span class="tag-list-count">28</span></li><li class="tag-list-item"><a class="tag-list-link" href="tags/Markdown/" rel="tag">Markdown</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="tags/Slash/" rel="tag">Slash</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="tags/VSCode/" rel="tag">VSCode</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="tags/%E6%80%9D%E8%80%83%E9%82%8F%E8%BC%AF/" rel="tag">思考邏輯</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="tags/%E6%96%9C%E6%A7%93%E9%9D%92%E5%B9%B4/" rel="tag">斜槓青年</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="tags/%E7%94%9F%E6%B6%AF%E8%A6%8F%E5%8A%83/" rel="tag">生涯規劃</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="tags/%E8%81%B7%E5%A0%B4%E5%B7%A5%E4%BD%9C/" rel="tag">職場工作</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="tags/%E9%9D%9E%E6%8A%80%E8%A1%93/" rel="tag">非技術</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">標籤雲</h3>
    <div class="widget tagcloud">
      <a href="tags/Audio/" style="font-size: 10px;">Audio</a> <a href="tags/CSS/" style="font-size: 12.5px;">CSS</a> <a href="tags/ES6/" style="font-size: 12.5px;">ES6</a> <a href="tags/ES7/" style="font-size: 10px;">ES7</a> <a href="tags/Editor/" style="font-size: 10px;">Editor</a> <a href="tags/Event-Delegation/" style="font-size: 10px;">Event Delegation</a> <a href="tags/Git/" style="font-size: 15px;">Git</a> <a href="tags/GitHub/" style="font-size: 10px;">GitHub</a> <a href="tags/HTML/" style="font-size: 17.5px;">HTML</a> <a href="tags/HTML5/" style="font-size: 12.5px;">HTML5</a> <a href="tags/Hexo/" style="font-size: 12.5px;">Hexo</a> <a href="tags/IDE/" style="font-size: 12.5px;">IDE</a> <a href="tags/JavaScript/" style="font-size: 20px;">JavaScript</a> <a href="tags/Markdown/" style="font-size: 10px;">Markdown</a> <a href="tags/Slash/" style="font-size: 12.5px;">Slash</a> <a href="tags/VSCode/" style="font-size: 12.5px;">VSCode</a> <a href="tags/%E6%80%9D%E8%80%83%E9%82%8F%E8%BC%AF/" style="font-size: 10px;">思考邏輯</a> <a href="tags/%E6%96%9C%E6%A7%93%E9%9D%92%E5%B9%B4/" style="font-size: 12.5px;">斜槓青年</a> <a href="tags/%E7%94%9F%E6%B6%AF%E8%A6%8F%E5%8A%83/" style="font-size: 15px;">生涯規劃</a> <a href="tags/%E8%81%B7%E5%A0%B4%E5%B7%A5%E4%BD%9C/" style="font-size: 12.5px;">職場工作</a> <a href="tags/%E9%9D%9E%E6%8A%80%E8%A1%93/" style="font-size: 10px;">非技術</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">歸檔</h3>

    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="archives/2020/02/">二月 2020</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="archives/2020/01/">一月 2020</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="archives/2019/12/">十二月 2019</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="archives/2019/11/">十一月 2019</a><span class="archive-list-count">25</span></li></ul>
    </div>
  </div>


  
</aside>
        
      </div>

    </div>
    <!-- <nav id="mobile-nav">
  
    <a href="index.html" class="mobile-nav-link">Home</a>
  
    <a href="archives" class="mobile-nav-link">Archives</a>
  
    <a href="categories" class="mobile-nav-link">Categories</a>
  
    <a href="tags" class="mobile-nav-link">Tags</a>
  
</nav> -->
    <footer id="footer" class="site-footer">
    

                <div class="clearfix container">
                    <div class="site-info">
                        &copy;
                        2020
                            Cyting 部落格 All Rights Reserved.
                                

                                    
                    </div>
                    <div class="site-credit">
                        Theme by <a href="https://github.com/iTimeTraveler/hexo-theme-hipaper" target="_blank">hipaper</a>
                    </div>
                </div>
</footer>


<!-- min height -->

<script>
    var wrapdiv = document.getElementById("wrap");
    var contentdiv = document.getElementById("content");

    wrapdiv.style.minHeight = document.body.offsetHeight - document.getElementById("allheader").offsetHeight - document.getElementById("footer").offsetHeight + "px";
    contentdiv.style.minHeight = document.body.offsetHeight - document.getElementById("allheader").offsetHeight - document.getElementById("footer").offsetHeight + "px";


    <!-- headerblur min height -->
    
</script>
    
<div style="display: none;">
  <script src="https://s11.cnzz.com/z_stat.php?id=1260716016&web_id=1260716016" language="JavaScript"></script>
</div>

<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  
<link rel="stylesheet" href="fancybox/jquery.fancybox.css">

  
<script src="fancybox/jquery.fancybox.pack.js"></script>




<script src="js/script.js"></script>


<script src="js/bootstrap.js"></script>


<script src="js/main.js"></script>



<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', '[object Object]', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->






  <div style="display: none;">
    <script src="https://s95.cnzz.com/z_stat.php?id=1260716016&web_id=1260716016" language="JavaScript"></script>
  </div>



	<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
	</script>






  </div>

  <a id="rocket" href="#top" class=""></a>
  <script type="text/javascript" src="/js/totop.js" async=""></script>
</body>
</html>
